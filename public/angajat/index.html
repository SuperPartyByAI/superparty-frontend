<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>SuperParty - Panou angajat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    #root {
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React + ReactDOM + Babel CDN (pentru dashboard) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState } = React;

    const OWNER_EMAIL = "andrei@example.com";
    const ADMIN_PASSWORD = "andrei-admin";
    const GM_PASSWORD = "andrei-gm";

    const App = () => {
      const [theme, setTheme] = useState("dark");
      const [screen, setScreen] = useState("DASHBOARD");
      const [currentUserEmail] = useState(OWNER_EMAIL);

      const [chatOpen, setChatOpen] = useState(false);
      const [sideNavOpen, setSideNavOpen] = useState(false);
      const [aiPrompt, setAiPrompt] = useState("");
      const [chatMessages, setChatMessages] = useState([]);
      const [waitingForPassword, setWaitingForPassword] = useState(null);

      const getNow = () => new Date().toLocaleString("ro-RO");

      const pushAi = (text) => {
        setChatMessages((prev) => [
          ...prev,
          { id: Date.now() + "-ai", from: "AI", text, timestamp: getNow() }
        ]);
      };

      const handleSend = () => {
        const text = aiPrompt.trim();
        if (!text) return;

        setChatMessages((prev) => [
          ...prev,
          { id: Date.now() + "-u", from: "USER", text, timestamp: getNow() }
        ]);
        setAiPrompt("");

        const lower = text.toLowerCase();

        if (waitingForPassword) {
          const correct =
            waitingForPassword === "ADMIN" ? ADMIN_PASSWORD : GM_PASSWORD;

          if (text === correct) {
            pushAi("ParolƒÉ corectƒÉ. Modul " + waitingForPassword + " deschis.");
            setScreen(waitingForPassword);
          } else {
            pushAi("ParolƒÉ gre»ôitƒÉ.");
          }
          setWaitingForPassword(null);
          return;
        }

        if (lower.includes("open mod andrei admin")) {
          if (currentUserEmail !== OWNER_EMAIL) {
            pushAi("Doar Andrei poate accesa modul Admin.");
            return;
          }
          pushAi("Scrie parola de ADMIN.");
          setWaitingForPassword("ADMIN");
          return;
        }

        if (lower.includes("open mod andrei gm")) {
          if (currentUserEmail !== OWNER_EMAIL) {
            pushAi("Doar Andrei poate accesa modul GM.");
            return;
          }
          pushAi("Scrie parola de GM.");
          setWaitingForPassword("GM");
          return;
        }

        pushAi("AI rƒÉspunde aici... (demo)");
      };

      const appBg = theme === "dark" ? "#020617" : "#f3f4f6";
      const appColor = theme === "dark" ? "#f9fafb" : "#0f172a";

      return (
        <>
          <style>{`
            .app {
              min-height: 100vh;
              background: ${appBg};
              color: ${appColor};
              transition: background 0.2s, color 0.2s;
            }
            .side-nav {
              position: fixed;
              left: 0;
              top: 0;
              height: 100vh;
              width: 170px;
              background: #111827;
              border-right: 1px solid #374151;
              transform: translateX(${sideNavOpen ? "0" : "-180px"});
              transition: transform .25s;
              padding: 16px 8px;
              color: white;
              z-index: 20;
            }
            .side-nav h3 {
              margin: 0 0 12px 4px;
              font-size: 15px;
            }
            .side-nav button {
              width: 100%;
              margin-bottom: 8px;
              padding: 8px 10px;
              border-radius: 8px;
              border: none;
              background: #1f2937;
              color: #e5e7eb;
              cursor: pointer;
              font-size: 13px;
              text-align: left;
            }
            .side-nav button:disabled {
              opacity: 0.4;
              cursor: not-allowed;
            }
            .side-nav button:hover:not(:disabled){
              background: #374151;
            }
            .side-tab {
              position: fixed;
              left: 0;
              top: 40%;
              width: 22px;
              height: 80px;
              background: #1e293b;
              color: #fff;
              display: flex;
              justify-content: center;
              align-items: center;
              border-radius: 0 8px 8px 0;
              cursor: pointer;
              z-index: 30;
              font-size: 10px;
            }
            .chat-btn {
              position: fixed;
              right: 16px;
              bottom: 16px;
              width: 60px;
              height: 60px;
              font-size: 30px;
              border-radius: 50%;
              background: #2563eb;
              color: white;
              border: none;
              cursor: pointer;
              box-shadow: 0 12px 30px rgba(37,99,235,0.45);
            }
            .floating {
              position: fixed;
              right: 16px;
              bottom: 16px;
              width: 320px;
              background: #020617;
              border-radius: 12px;
              padding: 10px;
              color: white;
              box-shadow: 0 20px 50px rgba(15,23,42,0.8);
              z-index: 40;
            }
            .msg {
              border: 1px solid #475569;
              padding: 6px;
              border-radius: 6px;
              margin: 4px 0;
              font-size: 12px;
            }
            .msg span.from {
              font-weight: 600;
              margin-right: 4px;
            }
            .top-bar {
              position: fixed;
              left: 0;
              right: 0;
              top: 0;
              height: 56px;
              display: flex;
              align-items: center;
              justify-content: space-between;
              padding: 0 16px 0 40px;
              box-sizing: border-box;
              background: rgba(15,23,42,0.9);
              backdrop-filter: blur(10px);
              color: #e5e7eb;
              z-index: 10;
            }
            .top-bar .logo {
              font-weight: 700;
              letter-spacing: 0.03em;
              font-size: 16px;
            }
            .top-bar .right {
              display: flex;
              align-items: center;
              gap: 8px;
              font-size: 12px;
            }
            .theme-toggle-button {
              border-radius: 999px;
              border: none;
              padding: 6px 10px;
              cursor: pointer;
              background: #111827;
              color: #e5e7eb;
            }
            .content {
              padding: 80px 20px 40px 40px;
            }
            .card {
              border-radius: 16px;
              padding: 16px;
              background: ${theme === "dark" ? "#020617" : "#ffffff"};
              box-shadow: 0 10px 30px rgba(15,23,42,0.45);
              max-width: 700px;
              margin-bottom: 20px;
            }
            .card h2 {
              margin-top: 0;
              margin-bottom: 8px;
            }
            .badge {
              display: inline-flex;
              align-items: center;
              gap: 4px;
              padding: 4px 8px;
              border-radius: 999px;
              font-size: 11px;
              background: #0f172a;
              color: #a5b4fc;
            }
          `}</style>

          <div className="app">
            {/* TAB ST√ÇNGA */}
            <div
              className="side-tab"
              onMouseEnter={() => setSideNavOpen(true)}
              onClick={() => setSideNavOpen(!sideNavOpen)}
            >
              |||
            </div>

            {/* MENIU ST√ÇNGA */}
            <div
              className="side-nav"
              onMouseLeave={() => setSideNavOpen(false)}
            >
              <h3>SuperParty</h3>
              <button onClick={() => setScreen("DASHBOARD")}>üè† Dashboard</button>
              <button
                onClick={() => setScreen("ADMIN")}
                disabled={currentUserEmail !== OWNER_EMAIL}
              >
                üìÑ Modul ADMIN
              </button>
              <button
                onClick={() => setScreen("GM")}
                disabled={currentUserEmail !== OWNER_EMAIL}
              >
                ‚öôÔ∏è Modul GM
              </button>
            </div>

            {/* TOP BAR */}
            <div className="top-bar">
              <div className="logo">üéâ SuperParty ¬∑ Panou angajat</div>
              <div className="right">
                <span className="badge">
                  ‚úÖ Autentificat
                </span>
                <button
                  className="theme-toggle-button"
                  onClick={() =>
                    setTheme(theme === "dark" ? "light" : "dark")
                  }
                >
                  {theme === "dark" ? "üåô Dark" : "‚òÄÔ∏è Light"}
                </button>
              </div>
            </div>

            {/* CON»öINUT */}
            <div className="content">
              {screen === "DASHBOARD" && (
                <div className="card">
                  <h2>Dashboard angajat</h2>
                  <p style={{ fontSize: "14px", opacity: 0.9 }}>
                    Aici vor apƒÉrea: evenimentele tale, rolurile, statusul
                    dovezilor foto »ôi informa»õii despre »ôofer/bagaj.
                  </p>
                  <p style={{ fontSize: "13px", marginTop: "8px" }}>
                    Momentan este o versiune demo de UI, logicƒÉ realƒÉ de evenimente
                    o legƒÉm ulterior de backend.
                  </p>
                </div>
              )}

              {screen === "ADMIN" && (
                <div className="card">
                  <h2>Modul ADMIN (demo)</h2>
                  <p style={{ fontSize: "14px" }}>
                    Modul intern pentru Andrei. Se deschide doar cu prompt +
                    parolƒÉ prin chat-ul AI.
                  </p>
                </div>
              )}

              {screen === "GM" && (
                <div className="card">
                  <h2>Modul GM (demo)</h2>
                  <p style={{ fontSize: "14px" }}>
                    Modul pentru Game Master / coordonare. Acces doar cu parola
                    corectƒÉ prin chat.
                  </p>
                </div>
              )}
            </div>

            {/* BUTON CHAT */}
            {!chatOpen && (
              <button className="chat-btn" onClick={() => setChatOpen(true)}>
                ü§ñ
              </button>
            )}

            {/* CHAT CARD */}
            {chatOpen && (
              <div className="floating">
                <button
                  onClick={() => setChatOpen(false)}
                  style={{
                    float: "right",
                    background: "none",
                    border: "none",
                    color: "#fff",
                    cursor: "pointer",
                  }}
                >
                  ‚úï
                </button>
                <h4 style={{ marginTop: 0 }}>Chat AI</h4>
                <div
                  style={{
                    maxHeight: 160,
                    overflowY: "auto",
                    marginBottom: 8,
                    borderRadius: 8,
                    padding: 4,
                    background: "#020617",
                  }}
                >
                  {chatMessages.map((m) => (
                    <div key={m.id} className="msg">
                      <span className="from">
                        {m.from === "USER" ? "TU" : "AI"}:
                      </span>
                      {m.text}
                    </div>
                  ))}
                  {chatMessages.length === 0 && (
                    <div style={{ fontSize: 12, opacity: 0.8 }}>
                      Scrie un mesaj. De exemplu:
                      <br />
                      <code>open mod andrei admin</code> sau{" "}
                      <code>open mod andrei gm</code>
                    </div>
                  )}
                </div>
                <textarea
                  value={aiPrompt}
                  onChange={(e) => setAiPrompt(e.target.value)}
                  style={{ width: "100%", height: 60, resize: "none" }}
                  placeholder="Scrie aici..."
                />
                <button
                  onClick={handleSend}
                  style={{
                    width: "100%",
                    marginTop: 6,
                    padding: "8px 0",
                    borderRadius: 8,
                    border: "none",
                    background: "#2563eb",
                    color: "#fff",
                    cursor: "pointer",
                  }}
                >
                  Trimite
                </button>
              </div>
            )}
          </div>
        </>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
