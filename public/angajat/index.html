<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>SuperParty - Panou angajat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    #root {
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React + ReactDOM + Babel -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- DASHBOARD ANGAJAT + CHAT AI (cu comenzi secrete ascunse din UI) -->
  <script type="text/babel">

    const { useState } = React;

    const OWNER_EMAIL = "andrei@example.com";
    const ADMIN_PASSWORD = "andrei-admin";
    const GM_PASSWORD = "andrei-gm";

    const App = () => {
      const [theme, setTheme] = useState("dark");
      const [screen, setScreen] = useState("DASHBOARD");
      const [currentUserEmail] = useState(OWNER_EMAIL);

      const [chatOpen, setChatOpen] = useState(false);
      const [sideNavOpen, setSideNavOpen] = useState(false);
      const [aiPrompt, setAiPrompt] = useState("");
      const [chatMessages, setChatMessages] = useState([]);
      const [waitingForPassword, setWaitingForPassword] = useState(null);

      const now = () => new Date().toLocaleString("ro-RO");

      const pushAI = (txt) => {
        setChatMessages(prev => [...prev, {
          id: Date.now() + "-ai",
          from: "AI",
          text: txt,
          timestamp: now()
        }]);
      };

      const pushUser = (txt) => {
        setChatMessages(prev => [...prev, {
          id: Date.now() + "-u",
          from: "USER",
          text: txt,
          timestamp: now()
        }]);
      };

      const handleSend = () => {
        const text = aiPrompt.trim();
        if (!text) return;
        pushUser(text);
        setAiPrompt("");

        const lower = text.toLowerCase();

        // parolƒÉ pentru acces ADMIN / GM
        if (waitingForPassword) {
          const correct =
            waitingForPassword === "ADMIN" ? ADMIN_PASSWORD : GM_PASSWORD;
          
          if (text === correct) {
            pushAI(`ParolƒÉ corectƒÉ ‚Üí Modul ${waitingForPassword} activat.`);
            setScreen(waitingForPassword);
          } else {
            pushAI("ParolƒÉ gre»ôitƒÉ.");
          }

          setWaitingForPassword(null);
          return;
        }

        // comenzi secrete (NU apar √Æn UI!)
        if (lower.includes("open mod andrei admin")) {
          if (currentUserEmail !== OWNER_EMAIL) return pushAI("Acces blocat.");
          pushAI("Scrie parola de ADMIN.");
          setWaitingForPassword("ADMIN");
          return;
        }

        if (lower.includes("open mod andrei gm")) {
          if (currentUserEmail !== OWNER_EMAIL) return pushAI("Acces blocat.");
          pushAI("Scrie parola de GM.");
          setWaitingForPassword("GM");
          return;
        }

        // rƒÉspuns AI default
        pushAI("AI rƒÉspunde aici‚Ä¶ (demo)");
      };

      const bg = theme === "dark" ? "#0f172a" : "#f3f4f6";
      const textColor = theme === "dark" ? "#fff" : "#000";

      return (
        <>
          <style>{`
            .app { min-height:100vh; background:${bg}; color:${textColor}; transition:.2s; }
            .side-tab {
              position:fixed; left:0; top:40%;
              width:22px; height:80px;
              background:#1e293b; color:white;
              display:flex; justify-content:center; align-items:center;
              border-radius:0 8px 8px 0; cursor:pointer; z-index:30;
            }
            .side-nav {
              position:fixed; left:0; top:0; height:100vh; width:170px;
              background:#111827; border-right:1px solid #374151;
              transform:translateX(${sideNavOpen ? "0" : "-180px"});
              transition:.25s; padding:16px; color:white; z-index:20;
            }
            .side-nav button {
              width:100%; padding:10px; margin-bottom:8px;
              border:none; border-radius:8px; cursor:pointer;
              background:#1f2937; color:#e5e7eb;
            }
            .side-nav button:hover:not(:disabled) { background:#374151; }
            .side-nav button:disabled { opacity:.4; cursor:not-allowed; }

            .top-bar {
              position:fixed; left:0; right:0; top:0; height:56px;
              background:rgba(15,23,42,.85); backdrop-filter:blur(10px);
              display:flex; justify-content:space-between; align-items:center;
              padding:0 20px; z-index:10; color:white;
            }

            .content { padding:80px 20px; }

            .chat-btn {
              position:fixed; right:16px; bottom:16px;
              width:60px; height:60px; font-size:30px;
              background:#2563eb; color:white;
              border:none; border-radius:50%; cursor:pointer;
              box-shadow:0 12px 30px rgba(37,99,235,.4);
            }

            .floating {
              position:fixed; right:16px; bottom:16px;
              width:320px; background:#020617;
              border-radius:12px; padding:10px; color:white;
              box-shadow:0 20px 50px rgba(15,23,42,.8); z-index:40;
            }

            .msg { border:1px solid #475569; padding:6px; margin:4px 0; border-radius:6px; }
          `}</style>

          <div className="app">

            <div className="side-tab"
              onClick={() => setSideNavOpen(!sideNavOpen)}
              onMouseEnter={() => setSideNavOpen(true)}
            >
              |||
            </div>

            <div className="side-nav"
              onMouseLeave={() => setSideNavOpen(false)}
            >
              <button onClick={() => setScreen("DASHBOARD")}>üè† Dashboard</button>
              <button
                onClick={() => setScreen("ADMIN")}
                disabled={currentUserEmail !== OWNER_EMAIL}
              >
                üìÑ Modul ADMIN
              </button>
              <button
                onClick={() => setScreen("GM")}
                disabled={currentUserEmail !== OWNER_EMAIL}
              >
                ‚öôÔ∏è Modul GM
              </button>
            </div>

            <div className="top-bar">
              <div style={{fontWeight:"bold"}}>üéâ SuperParty ¬∑ Panou angajat</div>

              <button
                onClick={() => setTheme(theme === "dark" ? "light" : "dark")}
                style={{
                  padding:"6px 12px",
                  borderRadius:"999px",
                  border:"none",
                  background:"#1f2937",
                  color:"white",
                  cursor:"pointer"
                }}
              >
                {theme === "dark" ? "üåô Dark" : "‚òÄÔ∏è Light"}
              </button>
            </div>

            <div className="content">

              {screen === "DASHBOARD" && (
                <h2>Dashboard angajat</h2>
              )}

              {screen === "ADMIN" && (
                <h2>Modul ADMIN (restric»õionat)</h2>
              )}

              {screen === "GM" && (
                <h2>Modul GM (restric»õionat)</h2>
              )}

            </div>

            {!chatOpen && (
              <button className="chat-btn" onClick={() => setChatOpen(true)}>
                ü§ñ
              </button>
            )}

            {chatOpen && (
              <div className="floating">
                <button
                  onClick={() => setChatOpen(false)}
                  style={{
                    float:"right",
                    background:"none",
                    border:"none",
                    color:"white",
                    cursor:"pointer"
                  }}
                >
                  ‚úï
                </button>

                <h4>Chat AI</h4>

                <div style={{
                  maxHeight:160,
                  overflowY:"auto",
                  marginBottom:6,
                  padding:4,
                  borderRadius:8
                }}>
                  {chatMessages.map(m => (
                    <div className="msg" key={m.id}>
                      <strong>{m.from === "USER" ? "TU" : "AI"}:</strong> {m.text}
                    </div>
                  ))}

                  {chatMessages.length === 0 && (
                    <div style={{fontSize:12,opacity:.7}}>
                      Scrie un mesaj cƒÉtre asistentul AI.
                    </div>
                  )}
                </div>

                <textarea
                  value={aiPrompt}
                  onChange={(e)=>setAiPrompt(e.target.value)}
                  placeholder="Scrie aici..."
                  style={{width:"100%", height:60, resize:"none"}}
                ></textarea>

                <button
                  onClick={handleSend}
                  style={{
                    width:"100%",
                    marginTop:6,
                    padding:"8px",
                    background:"#2563eb",
                    color:"white",
                    border:"none",
                    borderRadius:8,
                    cursor:"pointer"
                  }}
                >
                  Trimite
                </button>

              </div>
            )}

          </div>
        </>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);

  </script>
</body>
</html>
