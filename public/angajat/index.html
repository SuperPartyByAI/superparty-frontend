<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>SuperParty - Dashboard angajat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg-main: #020617;
      --bg-card: rgba(15, 23, 42, 0.98);
      --accent-blue: #3b82f6;
      --accent-soft: #1d4ed8;
      --accent-green: #22c55e;
      --accent-red: #ef4444;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 22px 50px rgba(15, 23, 42, 0.9);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      min-height: 100vh;
      background: radial-gradient(circle at top, #1d4ed8 0, #0f172a 45%, #020617 100%);
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app-shell {
      width: 100%;
      max-width: 1100px;
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.25);
      display: grid;
      grid-template-columns: 260px minmax(0, 1fr);
      overflow: hidden;
    }

    @media (max-width: 880px) {
      .app-shell {
        grid-template-columns: minmax(0, 1fr);
      }
      .sidebar {
        position: absolute;
        left: 12px;
        top: 12px;
        bottom: 12px;
        width: 240px;
        transform: translateX(-110%);
        transition: transform 0.18s ease;
        z-index: 50;
      }
      .sidebar.open {
        transform: translateX(0);
      }
      .sidebar-toggle {
        position: absolute;
        left: 16px;
        top: 16px;
        z-index: 60;
      }
      .main {
        padding-top: 54px;
      }
    }

    .sidebar {
      background: radial-gradient(circle at 0 0, #1d4ed8 0, #020617 55%);
      border-right: 1px solid rgba(15, 23, 42, 0.9);
      padding: 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .sidebar-logo {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: radial-gradient(circle at 25% 0, #38bdf8 0, #1d4ed8 40%, #020617 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 18px;
    }

    .sidebar-title {
      font-size: 15px;
      font-weight: 600;
    }

    .sidebar-subtitle {
      font-size: 11px;
      color: #cbd5f5;
    }

    .sidebar-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .sidebar-pill {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 5px 9px;
      font-size: 11px;
      color: #e5e7eb;
      margin-bottom: 4px;
    }

    .sidebar-stats {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
      margin-top: 6px;
    }

    .sidebar-stat-card {
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 6px 7px;
      font-size: 11px;
    }

    .sidebar-stat-label {
      color: #9ca3af;
      font-size: 11px;
    }

    .sidebar-stat-value {
      font-size: 14px;
      font-weight: 600;
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: #9ca3af;
    }

    .sidebar-footer a {
      color: #bfdbfe;
      text-decoration: none;
    }

    .sidebar-footer a:hover {
      text-decoration: underline;
    }

    .main {
      padding: 16px 18px 18px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      background: radial-gradient(circle at top right, #020617 0, #020617 45%, #020617 100%);
      position: relative;
    }

    .sidebar-toggle {
      display: none;
    }

    .top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 4px;
    }

    .top-greeting {
      font-size: 15px;
      font-weight: 500;
    }

    .top-greeting span {
      color: #93c5fd;
    }

    .top-meta {
      font-size: 11px;
      color: #9ca3af;
    }

    .chips-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }

    .chip {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 4px 8px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      color: #e5e7eb;
    }

    .chip-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }

    .chip-danger .chip-dot {
      background: #ef4444;
    }

    .card {
      border-radius: var(--radius-md);
      border: 1px solid rgba(31, 41, 55, 0.9);
      background: rgba(15, 23, 42, 0.98);
      padding: 11px 11px 9px;
    }

    .card-title-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
    }

    .card-sub {
      font-size: 11px;
      color: #9ca3af;
    }

    .tabs {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid rgba(31, 41, 55, 0.9);
      overflow: hidden;
      font-size: 11px;
      margin-bottom: 4px;
    }

    .tab-btn {
      padding: 4px 8px;
      background: transparent;
      border: none;
      color: #9ca3af;
      cursor: pointer;
    }

    .tab-btn.active {
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
    }

    .events-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }

    .event-card {
      border-radius: 10px;
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 7px 8px;
      font-size: 12px;
      display: grid;
      grid-template-columns: minmax(0, 1.8fr) minmax(0, 1.4fr);
      gap: 6px;
      cursor: pointer;
    }

    @media (max-width: 720px) {
      .event-card {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .event-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .event-title {
      font-size: 13px;
      font-weight: 500;
    }

    .event-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
      color: #9ca3af;
    }

    .event-meta span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .event-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 3px;
    }

    .event-pill {
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 2px 6px;
      font-size: 11px;
      color: #9ca3af;
    }

    .event-pill.badge-red {
      border-color: var(--accent-red);
      color: #fecaca;
    }

    .event-pill.badge-green {
      border-color: var(--accent-green);
      color: #bbf7d0;
    }

    .event-actions {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 4px;
      align-items: flex-end;
      text-align: right;
    }

    .btn-small {
      border-radius: 999px;
      border: 1px solid rgba(59, 130, 246, 0.9);
      padding: 4px 8px;
      font-size: 11px;
      background: linear-gradient(135deg, #1d4ed8, #3b82f6);
      color: #f9fafb;
      cursor: pointer;
    }

    .btn-small.secondary {
      border-color: rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 1);
      color: #e5e7eb;
    }

    .badge-counter {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: #e5e7eb;
    }

    .footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }

    .footer-row a {
      color: #93c5fd;
      text-decoration: none;
    }

    .footer-row a:hover {
      text-decoration: underline;
    }

    .kyc-warning {
      font-size: 11px;
      color: #facc15;
    }

    .kyc-warning strong {
      color: #fee66e;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">SP</div>
        <div>
          <div class="sidebar-title">SuperParty ¬∑ Angajat</div>
          <div class="sidebar-subtitle">evenimente ¬∑ dovezi ¬∑ KYC</div>
        </div>
      </div>

      <div>
        <div class="sidebar-section-title">Contul tƒÉu</div>
        <div class="sidebar-pill" id="accountStatusPill">
          Status cont: <strong>pending_kyc</strong>
        </div>
        <div class="sidebar-stats">
          <div class="sidebar-stat-card">
            <div class="sidebar-stat-label">Evenimente azi</div>
            <div class="sidebar-stat-value" id="statToday">2</div>
          </div>
          <div class="sidebar-stat-card">
            <div class="sidebar-stat-label">Weekend</div>
            <div class="sidebar-stat-value" id="statWeekend">1</div>
          </div>
        </div>
      </div>

      <div>
        <div class="sidebar-section-title">Dovezi</div>
        <div class="sidebar-pill">
          Dovezi lipsƒÉ: <strong id="missingProofs">3</strong>
        </div>
      </div>

      <div class="sidebar-footer">
        <div>ID utilizator: <span id="userEmailLabel">necunoscut</span></div>
        <div>
          KYC: <strong id="kycStateLabel">nu e completat</strong> ¬∑
          <a href="/angajat/kyc.html">deschide KYC</a>
        </div>
        <div>
          <a href="/login.html">Deconectare</a>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <button class="btn-small secondary sidebar-toggle" id="sidebarToggle">Meniu</button>

      <div class="top-row">
        <div>
          <div class="top-greeting">Salut, <span id="userNameLabel">Andrei</span> üëã</div>
          <div class="top-meta">Aici vezi evenimentele tale, dovezile »ôi po»õi vorbi cu AI-ul SuperParty.</div>
        </div>
        <div class="badge-counter">Mod: angajat</div>
      </div>

      <div class="chips-row">
        <div class="chip">
          <span class="chip-dot"></span>
          Anima»õie copii
        </div>
        <div class="chip">
          <span class="chip-dot"></span>
          Dovezi obligatorii
        </div>
        <div class="chip chip-danger">
          <span class="chip-dot"></span>
          Ai dovezi lipsƒÉ
        </div>
      </div>

      <section class="card">
        <div class="card-title-row">
          <div>
            <div class="card-title">Evenimentele tale</div>
            <div class="card-sub">ApasƒÉ pe un eveniment pentru detalii sau pe butonul cu üì∏ pentru poze.</div>
          </div>
          <div class="tabs">
            <button class="tab-btn active" data-filter="today">Azi</button>
            <button class="tab-btn" data-filter="weekend">Weekend</button>
            <button class="tab-btn" data-filter="all">Toate</button>
          </div>
        </div>

        <div class="events-list" id="eventsList">
          <!-- EVT_001 -->
          <article class="event-card" data-id="EVT_001" data-type="today">
            <div class="event-main">
              <div class="event-title">Elsa 2h + Olaf 2h</div>
              <div class="event-meta">
                <span>üìÖ Azi ¬∑ 15:00 - 17:00</span>
                <span>üìç Bucure»ôti, Sector 3</span>
              </div>
              <div class="event-meta">
                <span>üë§ Maria Ionescu ¬∑ 0722 456 789</span>
              </div>
              <div class="event-pill-row">
                <div class="event-pill">Rol principal: Anima»õie copii</div>
                <div class="event-pill">»òofer: nu e nevoie</div>
                <div class="event-pill badge-red">Dovezi lipsƒÉ: 1</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="btn-small" data-proof-btn="EVT_001">üì∏ Dovezi EVT_001</button>
              <button class="btn-small secondary" data-ask-ai="EVT_001">√éntreabƒÉ AI despre EVT_001</button>
            </div>
          </article>

          <!-- EVT_002 -->
          <article class="event-card" data-id="EVT_002" data-type="today">
            <div class="event-main">
              <div class="event-title">Spider-Man 2h</div>
              <div class="event-meta">
                <span>üìÖ Azi ¬∑ 11:00 - 13:00</span>
                <span>üìç Bucure»ôti, Sector 4</span>
              </div>
              <div class="event-meta">
                <span>üë§ Alex Pop ¬∑ 0733 111 222</span>
              </div>
              <div class="event-pill-row">
                <div class="event-pill">Rol principal: Anima»õie</div>
                <div class="event-pill badge-green">Dovezi complete</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="btn-small" data-proof-btn="EVT_002">üì∏ Dovezi EVT_002</button>
              <button class="btn-small secondary" data-ask-ai="EVT_002">√éntreabƒÉ AI despre EVT_002</button>
            </div>
          </article>

          <!-- EVT_003 -->
          <article class="event-card" data-id="EVT_003" data-type="weekend">
            <div class="event-main">
              <div class="event-title">Minnie Mouse 2h</div>
              <div class="event-meta">
                <span>üìÖ S√¢mbƒÉtƒÉ ¬∑ 17:00 - 19:00</span>
                <span>üìç Voluntari</span>
              </div>
              <div class="event-meta">
                <span>üë§ Ioana Dumitru ¬∑ 0744 333 999</span>
              </div>
              <div class="event-pill-row">
                <div class="event-pill">Rol principal: Anima»õie</div>
                <div class="event-pill badge-red">Dovezi lipsƒÉ: 2</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="btn-small" data-proof-btn="EVT_003">üì∏ Dovezi EVT_003</button>
              <button class="btn-small secondary" data-ask-ai="EVT_003">√éntreabƒÉ AI despre EVT_003</button>
            </div>
          </article>
        </div>

        <div class="footer-row">
          <div class="kyc-warning">
            Pentru cont <strong>ACTIVE</strong> trebuie sƒÉ ai KYC aprobat »ôi sƒÉ respec»õi toate dovezile obligatorii.
          </div>
          <a href="/angajat/kyc.html">Deschide pagina KYC ‚Üí</a>
        </div>
      </section>
    </main>
  </div>

  <!-- LOGICƒÇ DASHBOARD MINIMALƒÇ -->
  <script>
    // For»õƒÉm KYC simplu: dacƒÉ nu e marcat local, sugerƒÉm KYC
    (function () {
      try {
        var kycCompleted = localStorage.getItem("kyc_completed");
        var kycLabel = document.getElementById("kycStateLabel");
        var accountPill = document.getElementById("accountStatusPill");

        if (kycCompleted === "yes") {
          if (kycLabel) kycLabel.textContent = "completat (local)";
          if (accountPill) accountPill.innerHTML = 'Status cont: <strong>pending_approval</strong>';
        } else {
          if (kycLabel) kycLabel.textContent = "nu e completat";
        }

        var email = localStorage.getItem("superparty_user_email") ||
                    localStorage.getItem("loggedUserEmail") ||
                    "necunoscut";
        var userLabel = document.getElementById("userEmailLabel");
        if (userLabel) userLabel.textContent = email;
      } catch (e) {
        // ignorƒÉm erorile de localStorage
      }
    })();

    // Toggle sidebar pe mobil
    (function () {
      var toggle = document.getElementById("sidebarToggle");
      var sidebar = document.getElementById("sidebar");
      if (!toggle || !sidebar) return;

      if (window.matchMedia("(max-width: 880px)").matches) {
        toggle.style.display = "inline-flex";
      }

      toggle.addEventListener("click", function () {
        sidebar.classList.toggle("open");
      });
    })();

    // Filtrare evenimente
    (function () {
      var tabs = document.querySelectorAll(".tab-btn");
      var events = document.querySelectorAll(".event-card");

      function applyFilter(filter) {
        events.forEach(function (evt) {
          var type = evt.getAttribute("data-type") || "all";
          if (filter === "all" || filter === type) {
            evt.style.display = "";
          } else {
            evt.style.display = "none";
          }
        });
      }

      tabs.forEach(function (btn) {
        btn.addEventListener("click", function () {
          tabs.forEach(function (b) { b.classList.remove("active"); });
          btn.classList.add("active");
          var filter = btn.getAttribute("data-filter");
          applyFilter(filter);
        });
      });

      // implicit: "today"
      applyFilter("today");
    })();

    // LegƒÉm butoanele "√éntreabƒÉ AI despre EVT_xxx"
    (function () {
      var askBtns = document.querySelectorAll("[data-ask-ai]");
      askBtns.forEach(function (btn) {
        btn.addEventListener("click", function (e) {
          var code = btn.getAttribute("data-ask-ai");
          // trimitem un eveniment custom pentru ai.js
          var ev = new CustomEvent("sp-ai-ask-event", { detail: { eventCode: code } });
          window.dispatchEvent(ev);
        });
      });
    })();
  </script>

  <!-- SUPERPARTY AI WIDGET -->
  <script src="ai.js"></script>
  <script>
    // Mic hook: dacƒÉ userul apasƒÉ pe "√éntreabƒÉ AI despre EVT_001", completƒÉm automat promptul
    (function () {
      window.addEventListener("sp-ai-ask-event", function (e) {
        var code = (e.detail && e.detail.eventCode) || "";
        var input = document.getElementById("spAiInput");
        var win = document.getElementById("spAiWindow");
        var toggle = document.getElementById("spAiToggleBtn");

        if (win && toggle) {
          win.classList.add("sp-open");
          toggle.style.opacity = "0";
          toggle.style.pointerEvents = "none";
        }

        var prompt = "Ce dovezi trebuie sƒÉ fac la " + code + "?";
        if (input) {
          input.value = prompt;
          input.focus();
        }

        // simulƒÉm un submit automat √Æn c√¢teva milisecunde
        setTimeout(function () {
          var form = document.getElementById("spAiForm");
          if (form) {
            form.dispatchEvent(new Event("submit", { cancelable: true, bubbles: true }));
          }
        }, 120);
      });
    })();
  </script>
</body>
</html>
